(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(47),a=n.n(c),s=n(9),i=n(10),o=n(7),u=n.n(o),l=n(13),j=n(28),b=n.n(j),d="/api/blogs",p=null,h={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,b.a.post(d,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){p="bearer ".concat(e)},update:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(d,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:p}},e.next=3,b.a.delete("".concat(d,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x={getUsers:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},O=n(4),f=n(139),m=n(140),g=n(154),v=n(153),y=function(e){return{type:"SET_NOTIFICATION",data:e}},w=function(e){return{type:"REMOVE_NOTIFICATION",data:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"SET_NOTIFICATION":return r;case"REMOVE_NOTIFICATION":return{};default:return e}},k=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/api/login",t);case 3:return n=e.sent,console.log("entered login"),e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/api/users",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=k,T=function(e){return{type:"SET_USER",data:e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"SET_USER":return r;case"REMOVE_USER":return null;default:return e}},L=n(2),U=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(O.a)(a,2),j=o[0],b=o[1],d=Object(s.b)(),p=Object(i.g)(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n&&j){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,N({username:n,password:j});case 6:if(r=e.sent){e.next=10;break}return setTimeout((function(){return d(w())}),4e3),e.abrupt("return",d(y({type:"failure",text:"Wrong username or password"})));case 10:d(T(r)),p.push("/"),h.setToken(r.token),window.localStorage.setItem("blogListUser",JSON.stringify(r)),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0),d(y({text:"Wrong Credentials",type:"failure"})),setTimeout((function(){return d(w())}),4e3);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)(f.a,{height:"94vh",children:Object(L.jsxs)(f.a,{direction:"column",bg:"gray.300",p:12,rounded:6,children:[Object(L.jsx)(m.a,{children:"Log in"}),Object(L.jsxs)("form",{className:"loginForm",onSubmit:x,children:[Object(L.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(L.jsx)(g.a,{type:"text",name:"username",id:"username",value:n,onChange:function(e){var t=e.target;return c(t.value)}}),Object(L.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(L.jsx)(g.a,{type:"password",name:"password",id:"password",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(L.jsx)(v.a,{type:"submit",id:"login-button",my:"7px",children:"Log in"})]})]})})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"INIT_BLOGS":return r;case"NEW_BLOG":return e.concat(r);case"LIKE_BLOG":var c=r.id,a=e.find((function(e){return e.id===c}));return a.likes+=1,e.map((function(e){return e.id!==c?e:a}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==r.id}));case"NEW_COMMENT":var s=r.blog.id,i=e.find((function(e){return e.id===s}));return i.comments=i.comments.concat(r.comment),e.map((function(e){return e.id!==s?e:i}));default:return e}},_=function(){var e=Object(s.c)((function(e){return e.user})),t=Object(r.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)(""),j=Object(O.a)(o,2),b=j[0],d=j[1],p=Object(r.useState)(""),x=Object(O.a)(p,2),S=x[0],k=x[1],E=Object(s.b)();if(!e)return Object(L.jsx)(i.a,{to:"/signup"});var N=function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("user",e),n.preventDefault(),h.setToken(e.token),t.next=5,h.create({title:c,author:b,url:S});case 5:r=t.sent,E((s=r,console.log(s),{type:"NEW_BLOG",data:s})),console.log(r,"newBlog"),a(""),d(""),k(""),E(y({type:"success",text:"a new blog ".concat(r.title," by ").concat(r.author)})),setTimeout((function(){return E(w())}),4e3);case 13:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(L.jsxs)(f.a,{direction:"column",bg:"gray.300",h:"92vh",p:7,children:[Object(L.jsx)(m.a,{children:"Add a Blog"}),Object(L.jsxs)("form",{onSubmit:N,children:[Object(L.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(L.jsx)(g.a,{type:"text",name:"title",value:c,onChange:function(e){var t=e.target;return a(t.value)}}),Object(L.jsx)("label",{htmlFor:"author",children:"Author "}),Object(L.jsx)(g.a,{type:"text",name:"author",value:b,onChange:function(e){var t=e.target;return d(t.value)}}),Object(L.jsx)("label",{htmlFor:"url",children:"Url "}),Object(L.jsx)(g.a,{type:"url",name:"url",value:S,onChange:function(e){var t=e.target;return k(t.value)}}),Object(L.jsx)(v.a,{type:"submit",my:"10px",children:"Create"})]})]})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"INIT_USERS":return r;case"NEW_USER":return e.concat(r);default:return e}},B=n(143),z=n(14),F=function(e){var t=e.user;return Object(L.jsxs)(B.h,{children:[Object(L.jsx)(B.d,{children:Object(L.jsx)(z.b,{to:"/users/".concat(t.id),children:t.name})}),Object(L.jsx)(B.d,{isNumeric:!0,children:t.blogs.length})]})},A=function(){var e=Object(s.c)((function(e){return e.users}));return console.log(e),Object(L.jsxs)(B.a,{variant:"striped",children:[Object(L.jsx)(B.b,{children:"All Signed up Users."}),Object(L.jsx)(B.g,{children:Object(L.jsxs)(B.h,{children:[Object(L.jsx)(B.f,{children:"Name of User"}),Object(L.jsx)(B.f,{isNumeric:!0,children:"No. of blogs created"})]})}),Object(L.jsx)(B.c,{children:e?e.map((function(e){return Object(L.jsx)(F,{user:e},e.id)})):Object(L.jsx)("p",{children:"No user"})}),Object(L.jsx)(B.e,{children:Object(L.jsxs)(B.h,{children:[Object(L.jsx)(B.f,{children:"Total Users :"}),Object(L.jsx)(B.f,{isNumeric:!0,children:e.length?e.length:0})]})})]})},G=function(){var e=Object(s.c)((function(e){return e.users})),t=Object(i.h)().id;if(!e.length)return Object(L.jsx)("p",{children:"Loading..."});var n=e.find((function(e){return e.id===t}));return console.log(e,"users"),console.log(n,"user"),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h2",{children:n.name}),Object(L.jsx)("h4",{children:"Added Blogs"}),n.blogs?Object(L.jsx)("ul",{children:n.blogs.map((function(e){return Object(L.jsx)("li",{children:e.title},e.id)}))}):Object(L.jsx)("p",{children:"No blog added yet"})]})},W=n(45),M=n(144),D=n(145),H=n(146),J=n(156),V=n(147),K=function(e){var t=e.blog,n=Object(s.b)(),r=Object(s.c)((function(e){return e.user}));if(r||i.a,!t)return Object(L.jsx)("p",{children:"Loading ..."});var c=function(){var e=Object(l.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(W.a)(Object(W.a)({},t),{},{likes:t.likes+1}),e.prev=1,e.next=4,h.update(t.id,r);case 4:n({type:"LIKE_BLOG",data:t}),n(y({text:"You liked ".concat(t.title),type:"success"})),setTimeout((function(){return n(w())}),4e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,h.setToken(r.token),e.next=6,h.remove(t.id);case 6:n({type:"DELETE_BLOG",data:t}),n(y({type:"success",text:"You deleted ".concat(t.title)})),setTimeout((function(){return n(w())})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(u.a.mark((function e(r){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),c=r.target.comment.value,console.log(c),c){e.next=5;break}return e.abrupt("return");case 5:return a=Object(W.a)(Object(W.a)({},t),{},{comments:t.comments.concat(c)}),console.log(c),e.prev=7,e.next=10,h.update(t.id,a);case 10:n({type:"NEW_COMMENT",data:{blog:t,comment:c}}),r.target.comment.value="",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return console.log(t.comments),Object(L.jsxs)(M.a,{children:[Object(L.jsxs)(D.a,{p:2,children:[Object(L.jsx)(m.a,{children:t.title}),Object(L.jsx)(H.a,{textDecoration:"underline",children:Object(L.jsx)("a",{href:t.url,className:"blogUrl",children:t.url})}),Object(L.jsxs)(f.a,{alignItems:"center",justifyContent:"space-between",children:[Object(L.jsxs)(H.a,{children:[Object(L.jsx)("span",{className:"likes",children:t.likes})," likes"]}),Object(L.jsx)(v.a,{onClick:c,borderRadius:"46%",children:"Like"})]}),Object(L.jsxs)(H.a,{children:["added by ",t.user&&t.user.name]})]}),Object(L.jsx)(H.a,{children:t.user.username===r.username?Object(L.jsx)(v.a,{onClick:a,children:"Remove"}):""}),Object(L.jsxs)(D.a,{children:[Object(L.jsxs)(m.a,{as:"h4",fontSize:"18px",children:["Comments ",t.comments.length?"(".concat(t.comments.length,")"):""]}),Object(L.jsxs)("form",{onSubmit:o,children:[Object(L.jsx)(g.a,{type:"text",name:"comment",maxW:"80vw",my:"10px"}),Object(L.jsx)(v.a,{type:"submit",mb:"5px",children:"Comment"})]}),Object(L.jsx)(J.a,{children:t.comments?t.comments.map((function(e,t){return Object(L.jsxs)(J.c,{children:[Object(L.jsx)(J.b,{as:V.a,color:"green.400"}),e]},t)})):null})]})]})},P=n(148),Y=n(155),q=function(e){var t=e.user,n=Object(s.b)();return Object(L.jsxs)("div",{children:[Object(L.jsx)(P.a,{as:z.c,to:"/blogs/create",px:"5px",children:"Add Blog"}),Object(L.jsx)(P.a,{as:z.c,to:"/users",px:"5px",children:"Users"}),Object(L.jsx)(Y.a,{name:t.name,size:"sm",px:"8px"}),Object(L.jsx)(v.a,{onClick:function(){window.localStorage.removeItem("blogListUser"),n({type:"REMOVE_USER"})},size:"sm",px:"5px",children:"logout"})]})},Q=function(){return Object(L.jsx)("div",{children:Object(L.jsx)(v.a,{colorScheme:"teal",size:"md",mr:"4",children:Object(L.jsx)(z.c,{to:"/signup",className:"navlink",children:"Get Started"})})})},X=n(149),Z=function(e){var t=e.user,n=t?Object(L.jsx)(q,{user:t}):Object(L.jsx)(Q,{});return Object(L.jsxs)(f.a,{borderBottom:"1px solid #888",p:"2",alignItems:"center",children:[Object(L.jsx)(D.a,{children:Object(L.jsxs)(m.a,{size:"md",children:[" ",Object(L.jsx)(z.b,{to:"/blogs",className:"navlink",children:"BLOGGS"})," "]})}),Object(L.jsx)(X.a,{}),Object(L.jsx)(D.a,{children:n})]})},$=function(){var e=Object(s.c)((function(e){return e.notification}));return e.type?Object(L.jsxs)("p",{id:"notificationMsg",className:"notification ".concat(e.type),children:[e.text," "]}):null},ee=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(O.a)(a,2),j=o[0],b=o[1],d=Object(r.useState)(""),p=Object(O.a)(d,2),h=p[0],x=p[1],S=Object(s.b)(),k=Object(i.g)(),N=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j&&h&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,E({name:n,username:j,password:h});case 6:return r=e.sent,S(T(r)),S({type:"NEW_USER",data:r}),k.push("/"),setTimeout((function(){return S(w())}),4e3),window.localStorage.setItem("blogListUser",JSON.stringify(r)),e.abrupt("return",S(y({type:"success",text:"".concat(r.name," successfully signed in")})));case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),S(y({text:"Wrong Credentials",type:"failure"})),setTimeout((function(){return S(w())}),4e3);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)(f.a,{height:"94vh",children:Object(L.jsxs)(f.a,{direction:"column",bg:"gray.300",p:12,rounded:6,children:[Object(L.jsx)(m.a,{children:"Signup"}),Object(L.jsxs)("form",{className:"loginForm",onSubmit:N,children:[Object(L.jsx)("label",{htmlFor:"username",children:"Name: "}),Object(L.jsx)(g.a,{type:"text",name:"name",id:"name",value:n,onChange:function(e){var t=e.target;return c(t.value)}}),Object(L.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(L.jsx)(g.a,{type:"text",name:"username",id:"signup-username",value:j,onChange:function(e){var t=e.target;return b(t.value)}}),Object(L.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(L.jsx)(g.a,{type:"password",name:"password",id:"signup-password",value:h,onChange:function(e){var t=e.target;return x(t.value)}}),Object(L.jsx)(v.a,{type:"submit",id:"login-button",my:"7px",children:"Signup"})]}),Object(L.jsxs)(H.a,{children:["Already have an account ?",Object(L.jsx)(P.a,{as:z.c,to:"/users/login",className:"navlink",color:"green.800",children:"Sign in"})]})]})})},te=n(150),ne=function(e){var t=e.blog,n=e.index;return console.log(t.user),Object(L.jsxs)(f.a,{my:"14px",children:[Object(L.jsxs)(D.a,{mr:"16px",color:"rgba(230, 230, 230, 1)",fontWeight:"bold",lineHeight:"36px",fontSize:"30px",children:["0",n+1]}),Object(L.jsxs)(D.a,{children:[Object(L.jsxs)(f.a,{alignItems:"center",my:"8px",children:[Object(L.jsx)(Y.a,{size:"xs",name:t.user.name}),Object(L.jsx)(m.a,{pl:"8px",fontSize:"13px",lineHeight:"17px",fontWeight:"500",children:t.user.name})]}),Object(L.jsx)(m.a,{as:"h2",my:"4px",fontWeight:"700",fontSize:"16px",color:"rgba(41, 41, 41, 1)",lineHeight:"20px",children:Object(L.jsx)(z.b,{to:"/blogs/".concat(t.id),children:t.title})}),Object(L.jsxs)(D.a,{color:"rgba(117, 117, 117, 1)",fontSize:"13px",lineHeight:"20px",children:[Object(L.jsx)(H.a,{as:"span",size:"xs",children:"Sep 15. "}),Object(L.jsx)(H.a,{as:"span",size:"2xs",mr:"8px",children:" 4 min read "}),t.likes>10?Object(L.jsx)(te.a,{h:"11px"}):""]})]})]})},re=n(151),ce=function(){var e=Object(s.c)((function(e){return e.blogs}));return e?Object(L.jsxs)(M.a,{children:[Object(L.jsxs)(f.a,{children:[Object(L.jsx)(re.a,{color:"gray.500",mr:"10px"}),Object(L.jsx)(H.a,{fontWeight:"700",letterSpacing:"0.083em",fontSize:"12px",lineHeight:"16px",color:"rgba(41, 41, 41, 1)",children:"TRENDING ON BLOGGS"})]}),Object(L.jsx)(D.a,{children:e.sort((function(e,t){return t.likes-e.likes})).map((function(e,t){return Object(L.jsx)(ne,{blog:e,index:t},e.id)}))})]}):Object(L.jsx)("p",{children:"No blog"})},ae=function(){var e=Object(s.b)();Object(r.useEffect)((function(){var t=window.localStorage.getItem("blogListUser");t&&e(T(JSON.parse(t)))}),[e]),Object(r.useEffect)((function(){h.getAll().then((function(t){return e({type:"INIT_BLOGS",data:t})}))}),[e]),Object(r.useEffect)((function(){x.getUsers().then((function(t){return e({type:"INIT_USERS",data:t})}))}),[e]);var t=Object(i.i)("/users/:id"),n=Object(i.i)("/blogs/:id"),c=Object(s.c)((function(e){return e.blogs})),a=Object(s.c)((function(e){return e.user})),o=Object(s.c)((function(e){return e.users})),u=t?o.find((function(e){return e.id===t.params.id})):null,l=n?c.find((function(e){return e.id===n.params.id})):null;return Object(L.jsxs)("div",{children:[Object(L.jsx)(Z,{user:a,handleLogout:function(){window.localStorage.removeItem("blogListUser"),e({type:"REMOVE_USER"})}}),Object(L.jsx)($,{}),Object(L.jsxs)(i.d,{children:[Object(L.jsx)(i.b,{exact:!0,path:"/",children:Object(L.jsx)(ce,{})}),Object(L.jsx)(i.b,{path:"/signup",component:ee}),Object(L.jsx)(i.b,{path:"/users/login",component:U}),Object(L.jsx)(i.b,{path:"/users/:id",children:Object(L.jsx)(G,{user:u})}),Object(L.jsx)(i.b,{path:"/users",component:A}),Object(L.jsx)(i.b,{path:"/blogs/create",component:_}),Object(L.jsx)(i.b,{path:"/blogs/:id",children:Object(L.jsx)(K,{blog:l})})]})]})},se=n(67),ie=(n(127),n(152)),oe=Object(se.a)({blogs:C,notification:S,users:R,user:I}),ue=Object(se.b)(oe);a.a.render(Object(L.jsx)(z.a,{children:Object(L.jsx)(s.a,{store:ue,children:Object(L.jsx)(ie.a,{children:Object(L.jsx)(ae,{})})})}),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.8a456791.chunk.js.map